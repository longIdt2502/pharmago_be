// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.23.0
// source: service.sql

package db

import (
	"context"
	"database/sql"
	"time"
)

const createService = `-- name: CreateService :one
INSERT INTO services (
    code, image, title, entity, staff, frequency, unit, price, description, 
    company, user_created, user_updated, reminder_time,
    brand, action_time, chi_dinh, chong_chi_dinh, cong_dung, caution, hinh_thuc,
    tac_dung_phu, number_register, number_decision, cong_ty_dk, message
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, 
    $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25
) RETURNING id, image, code, title, entity, staff, frequency, reminder_time, unit, price, description, company, user_created, user_updated, created_at, updated_at, brand, action_time, chi_dinh, chong_chi_dinh, cong_dung, caution, hinh_thuc, tac_dung_phu, number_register, number_decision, cong_ty_dk, message
`

type CreateServiceParams struct {
	Code           string         `json:"code"`
	Image          sql.NullInt32  `json:"image"`
	Title          string         `json:"title"`
	Entity         sql.NullString `json:"entity"`
	Staff          sql.NullInt32  `json:"staff"`
	Frequency      sql.NullString `json:"frequency"`
	Unit           string         `json:"unit"`
	Price          float64        `json:"price"`
	Description    sql.NullString `json:"description"`
	Company        int32          `json:"company"`
	UserCreated    int32          `json:"user_created"`
	UserUpdated    sql.NullInt32  `json:"user_updated"`
	ReminderTime   sql.NullInt32  `json:"reminder_time"`
	Brand          sql.NullInt32  `json:"brand"`
	ActionTime     sql.NullString `json:"action_time"`
	ChiDinh        sql.NullString `json:"chi_dinh"`
	ChongChiDinh   sql.NullString `json:"chong_chi_dinh"`
	CongDung       sql.NullString `json:"cong_dung"`
	Caution        sql.NullString `json:"caution"`
	HinhThuc       sql.NullString `json:"hinh_thuc"`
	TacDungPhu     sql.NullString `json:"tac_dung_phu"`
	NumberRegister sql.NullString `json:"number_register"`
	NumberDecision sql.NullString `json:"number_decision"`
	CongTyDk       sql.NullString `json:"cong_ty_dk"`
	Message        sql.NullString `json:"message"`
}

func (q *Queries) CreateService(ctx context.Context, arg CreateServiceParams) (Service, error) {
	row := q.db.QueryRowContext(ctx, createService,
		arg.Code,
		arg.Image,
		arg.Title,
		arg.Entity,
		arg.Staff,
		arg.Frequency,
		arg.Unit,
		arg.Price,
		arg.Description,
		arg.Company,
		arg.UserCreated,
		arg.UserUpdated,
		arg.ReminderTime,
		arg.Brand,
		arg.ActionTime,
		arg.ChiDinh,
		arg.ChongChiDinh,
		arg.CongDung,
		arg.Caution,
		arg.HinhThuc,
		arg.TacDungPhu,
		arg.NumberRegister,
		arg.NumberDecision,
		arg.CongTyDk,
		arg.Message,
	)
	var i Service
	err := row.Scan(
		&i.ID,
		&i.Image,
		&i.Code,
		&i.Title,
		&i.Entity,
		&i.Staff,
		&i.Frequency,
		&i.ReminderTime,
		&i.Unit,
		&i.Price,
		&i.Description,
		&i.Company,
		&i.UserCreated,
		&i.UserUpdated,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Brand,
		&i.ActionTime,
		&i.ChiDinh,
		&i.ChongChiDinh,
		&i.CongDung,
		&i.Caution,
		&i.HinhThuc,
		&i.TacDungPhu,
		&i.NumberRegister,
		&i.NumberDecision,
		&i.CongTyDk,
		&i.Message,
	)
	return i, err
}

const createServiceVariant = `-- name: CreateServiceVariant :one
INSERT INTO service_variant (
    service, variant
) VALUES (
    $1, $2
) RETURNING id, service, variant
`

type CreateServiceVariantParams struct {
	Service sql.NullInt32 `json:"service"`
	Variant sql.NullInt32 `json:"variant"`
}

func (q *Queries) CreateServiceVariant(ctx context.Context, arg CreateServiceVariantParams) (ServiceVariant, error) {
	row := q.db.QueryRowContext(ctx, createServiceVariant, arg.Service, arg.Variant)
	var i ServiceVariant
	err := row.Scan(&i.ID, &i.Service, &i.Variant)
	return i, err
}

const deleteService = `-- name: DeleteService :one
DELETE FROM services
WHERE id = $1
RETURNING id, image, code, title, entity, staff, frequency, reminder_time, unit, price, description, company, user_created, user_updated, created_at, updated_at, brand, action_time, chi_dinh, chong_chi_dinh, cong_dung, caution, hinh_thuc, tac_dung_phu, number_register, number_decision, cong_ty_dk, message
`

func (q *Queries) DeleteService(ctx context.Context, id int32) (Service, error) {
	row := q.db.QueryRowContext(ctx, deleteService, id)
	var i Service
	err := row.Scan(
		&i.ID,
		&i.Image,
		&i.Code,
		&i.Title,
		&i.Entity,
		&i.Staff,
		&i.Frequency,
		&i.ReminderTime,
		&i.Unit,
		&i.Price,
		&i.Description,
		&i.Company,
		&i.UserCreated,
		&i.UserUpdated,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Brand,
		&i.ActionTime,
		&i.ChiDinh,
		&i.ChongChiDinh,
		&i.CongDung,
		&i.Caution,
		&i.HinhThuc,
		&i.TacDungPhu,
		&i.NumberRegister,
		&i.NumberDecision,
		&i.CongTyDk,
		&i.Message,
	)
	return i, err
}

const deleteServiceVariant = `-- name: DeleteServiceVariant :one
DELETE FROM service_variant
WHERE id = $1
RETURNING id, service, variant
`

func (q *Queries) DeleteServiceVariant(ctx context.Context, id int32) (ServiceVariant, error) {
	row := q.db.QueryRowContext(ctx, deleteServiceVariant, id)
	var i ServiceVariant
	err := row.Scan(&i.ID, &i.Service, &i.Variant)
	return i, err
}

const detailService = `-- name: DetailService :one
SELECT s.id, image, s.code, title, entity, staff, frequency, reminder_time, unit, price, s.description, s.company, s.user_created, s.user_updated, s.created_at, s.updated_at, brand, action_time, chi_dinh, chong_chi_dinh, cong_dung, caution, hinh_thuc, tac_dung_phu, number_register, number_decision, cong_ty_dk, message, a.id, username, hashed_password, full_name, email, type, is_verify, password_changed_at, a.created_at, role, gender, licence, dob, address, pb.id, pb.code, name, pb.user_created, pb.created_at, pb.company, pb.user_updated, pb.updated_at, pb.description FROM services s
LEFT JOIN accounts a ON a.id = s.staff
LEFT JOIN product_brand pb ON pb.id = s.brand
WHERE s.id = $1
`

type DetailServiceRow struct {
	ID                int32          `json:"id"`
	Image             sql.NullInt32  `json:"image"`
	Code              string         `json:"code"`
	Title             string         `json:"title"`
	Entity            sql.NullString `json:"entity"`
	Staff             sql.NullInt32  `json:"staff"`
	Frequency         sql.NullString `json:"frequency"`
	ReminderTime      sql.NullInt32  `json:"reminder_time"`
	Unit              string         `json:"unit"`
	Price             float64        `json:"price"`
	Description       sql.NullString `json:"description"`
	Company           int32          `json:"company"`
	UserCreated       int32          `json:"user_created"`
	UserUpdated       sql.NullInt32  `json:"user_updated"`
	CreatedAt         time.Time      `json:"created_at"`
	UpdatedAt         sql.NullTime   `json:"updated_at"`
	Brand             sql.NullInt32  `json:"brand"`
	ActionTime        sql.NullString `json:"action_time"`
	ChiDinh           sql.NullString `json:"chi_dinh"`
	ChongChiDinh      sql.NullString `json:"chong_chi_dinh"`
	CongDung          sql.NullString `json:"cong_dung"`
	Caution           sql.NullString `json:"caution"`
	HinhThuc          sql.NullString `json:"hinh_thuc"`
	TacDungPhu        sql.NullString `json:"tac_dung_phu"`
	NumberRegister    sql.NullString `json:"number_register"`
	NumberDecision    sql.NullString `json:"number_decision"`
	CongTyDk          sql.NullString `json:"cong_ty_dk"`
	Message           sql.NullString `json:"message"`
	ID_2              sql.NullInt32  `json:"id_2"`
	Username          sql.NullString `json:"username"`
	HashedPassword    sql.NullString `json:"hashed_password"`
	FullName          sql.NullString `json:"full_name"`
	Email             sql.NullString `json:"email"`
	Type              sql.NullInt32  `json:"type"`
	IsVerify          sql.NullBool   `json:"is_verify"`
	PasswordChangedAt sql.NullTime   `json:"password_changed_at"`
	CreatedAt_2       sql.NullTime   `json:"created_at_2"`
	Role              sql.NullInt32  `json:"role"`
	Gender            NullGender     `json:"gender"`
	Licence           sql.NullString `json:"licence"`
	Dob               sql.NullTime   `json:"dob"`
	Address           sql.NullInt32  `json:"address"`
	ID_3              sql.NullInt32  `json:"id_3"`
	Code_2            sql.NullString `json:"code_2"`
	Name              sql.NullString `json:"name"`
	UserCreated_2     sql.NullInt32  `json:"user_created_2"`
	CreatedAt_3       sql.NullTime   `json:"created_at_3"`
	Company_2         sql.NullInt32  `json:"company_2"`
	UserUpdated_2     sql.NullInt32  `json:"user_updated_2"`
	UpdatedAt_2       sql.NullTime   `json:"updated_at_2"`
	Description_2     sql.NullString `json:"description_2"`
}

func (q *Queries) DetailService(ctx context.Context, id int32) (DetailServiceRow, error) {
	row := q.db.QueryRowContext(ctx, detailService, id)
	var i DetailServiceRow
	err := row.Scan(
		&i.ID,
		&i.Image,
		&i.Code,
		&i.Title,
		&i.Entity,
		&i.Staff,
		&i.Frequency,
		&i.ReminderTime,
		&i.Unit,
		&i.Price,
		&i.Description,
		&i.Company,
		&i.UserCreated,
		&i.UserUpdated,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Brand,
		&i.ActionTime,
		&i.ChiDinh,
		&i.ChongChiDinh,
		&i.CongDung,
		&i.Caution,
		&i.HinhThuc,
		&i.TacDungPhu,
		&i.NumberRegister,
		&i.NumberDecision,
		&i.CongTyDk,
		&i.Message,
		&i.ID_2,
		&i.Username,
		&i.HashedPassword,
		&i.FullName,
		&i.Email,
		&i.Type,
		&i.IsVerify,
		&i.PasswordChangedAt,
		&i.CreatedAt_2,
		&i.Role,
		&i.Gender,
		&i.Licence,
		&i.Dob,
		&i.Address,
		&i.ID_3,
		&i.Code_2,
		&i.Name,
		&i.UserCreated_2,
		&i.CreatedAt_3,
		&i.Company_2,
		&i.UserUpdated_2,
		&i.UpdatedAt_2,
		&i.Description_2,
	)
	return i, err
}

const getListService = `-- name: GetListService :many
WITH quantity_use AS (
    SELECT "service", COUNT("service") as quantity_use FROM service_order_item
    GROUP BY "service"
)
SELECT id, image, code, title, entity, staff, frequency, reminder_time, unit, price, description, company, user_created, user_updated, created_at, updated_at, brand, action_time, chi_dinh, chong_chi_dinh, cong_dung, caution, hinh_thuc, tac_dung_phu, number_register, number_decision, cong_ty_dk, message, service, quantity_use FROM services s
LEFT JOIN quantity_use qu ON s.id = qu.service
WHERE s.company = $1::int
AND (
    s.title ILIKE '%' || COALESCE($2::varchar, '') || '%' OR
    s.code ILIKE '%' || COALESCE($2::varchar, '') || '%'
)
ORDER BY -s.id
LIMIT COALESCE($4::int, 10)
OFFSET (COALESCE($3::int, 1) - 1) * COALESCE($4::int, 10)
`

type GetListServiceParams struct {
	Company sql.NullInt32  `json:"company"`
	Search  sql.NullString `json:"search"`
	Page    sql.NullInt32  `json:"page"`
	Limit   sql.NullInt32  `json:"limit"`
}

type GetListServiceRow struct {
	ID             int32          `json:"id"`
	Image          sql.NullInt32  `json:"image"`
	Code           string         `json:"code"`
	Title          string         `json:"title"`
	Entity         sql.NullString `json:"entity"`
	Staff          sql.NullInt32  `json:"staff"`
	Frequency      sql.NullString `json:"frequency"`
	ReminderTime   sql.NullInt32  `json:"reminder_time"`
	Unit           string         `json:"unit"`
	Price          float64        `json:"price"`
	Description    sql.NullString `json:"description"`
	Company        int32          `json:"company"`
	UserCreated    int32          `json:"user_created"`
	UserUpdated    sql.NullInt32  `json:"user_updated"`
	CreatedAt      time.Time      `json:"created_at"`
	UpdatedAt      sql.NullTime   `json:"updated_at"`
	Brand          sql.NullInt32  `json:"brand"`
	ActionTime     sql.NullString `json:"action_time"`
	ChiDinh        sql.NullString `json:"chi_dinh"`
	ChongChiDinh   sql.NullString `json:"chong_chi_dinh"`
	CongDung       sql.NullString `json:"cong_dung"`
	Caution        sql.NullString `json:"caution"`
	HinhThuc       sql.NullString `json:"hinh_thuc"`
	TacDungPhu     sql.NullString `json:"tac_dung_phu"`
	NumberRegister sql.NullString `json:"number_register"`
	NumberDecision sql.NullString `json:"number_decision"`
	CongTyDk       sql.NullString `json:"cong_ty_dk"`
	Message        sql.NullString `json:"message"`
	Service        sql.NullInt32  `json:"service"`
	QuantityUse    sql.NullInt64  `json:"quantity_use"`
}

func (q *Queries) GetListService(ctx context.Context, arg GetListServiceParams) ([]GetListServiceRow, error) {
	rows, err := q.db.QueryContext(ctx, getListService,
		arg.Company,
		arg.Search,
		arg.Page,
		arg.Limit,
	)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetListServiceRow{}
	for rows.Next() {
		var i GetListServiceRow
		if err := rows.Scan(
			&i.ID,
			&i.Image,
			&i.Code,
			&i.Title,
			&i.Entity,
			&i.Staff,
			&i.Frequency,
			&i.ReminderTime,
			&i.Unit,
			&i.Price,
			&i.Description,
			&i.Company,
			&i.UserCreated,
			&i.UserUpdated,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Brand,
			&i.ActionTime,
			&i.ChiDinh,
			&i.ChongChiDinh,
			&i.CongDung,
			&i.Caution,
			&i.HinhThuc,
			&i.TacDungPhu,
			&i.NumberRegister,
			&i.NumberDecision,
			&i.CongTyDk,
			&i.Message,
			&i.Service,
			&i.QuantityUse,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getServicesByCustomer = `-- name: GetServicesByCustomer :many
SELECT s.id, s.image, s.code, s.title, s.entity, s.staff, s.frequency, s.reminder_time, s.unit, s.price, s.description, s.company, s.user_created, s.user_updated, s.created_at, s.updated_at, s.brand, s.action_time, s.chi_dinh, s.chong_chi_dinh, s.cong_dung, s.caution, s.hinh_thuc, s.tac_dung_phu, s.number_register, s.number_decision, s.cong_ty_dk, s.message, SUM(quantity) as quantity_use FROM service_order_item soi
JOIN orders o ON o.id = soi.order
JOIN services s ON s.id = soi.service
WHERE o.customer = $1::int
GROUP BY soi.service, s.id
LIMIT COALESCE($3::int, 10)
OFFSET (COALESCE($2::int, 1) - 1) * COALESCE($3::int, 10)
`

type GetServicesByCustomerParams struct {
	Customer int32         `json:"customer"`
	Page     sql.NullInt32 `json:"page"`
	Limit    sql.NullInt32 `json:"limit"`
}

type GetServicesByCustomerRow struct {
	ID             int32          `json:"id"`
	Image          sql.NullInt32  `json:"image"`
	Code           string         `json:"code"`
	Title          string         `json:"title"`
	Entity         sql.NullString `json:"entity"`
	Staff          sql.NullInt32  `json:"staff"`
	Frequency      sql.NullString `json:"frequency"`
	ReminderTime   sql.NullInt32  `json:"reminder_time"`
	Unit           string         `json:"unit"`
	Price          float64        `json:"price"`
	Description    sql.NullString `json:"description"`
	Company        int32          `json:"company"`
	UserCreated    int32          `json:"user_created"`
	UserUpdated    sql.NullInt32  `json:"user_updated"`
	CreatedAt      time.Time      `json:"created_at"`
	UpdatedAt      sql.NullTime   `json:"updated_at"`
	Brand          sql.NullInt32  `json:"brand"`
	ActionTime     sql.NullString `json:"action_time"`
	ChiDinh        sql.NullString `json:"chi_dinh"`
	ChongChiDinh   sql.NullString `json:"chong_chi_dinh"`
	CongDung       sql.NullString `json:"cong_dung"`
	Caution        sql.NullString `json:"caution"`
	HinhThuc       sql.NullString `json:"hinh_thuc"`
	TacDungPhu     sql.NullString `json:"tac_dung_phu"`
	NumberRegister sql.NullString `json:"number_register"`
	NumberDecision sql.NullString `json:"number_decision"`
	CongTyDk       sql.NullString `json:"cong_ty_dk"`
	Message        sql.NullString `json:"message"`
	QuantityUse    int64          `json:"quantity_use"`
}

func (q *Queries) GetServicesByCustomer(ctx context.Context, arg GetServicesByCustomerParams) ([]GetServicesByCustomerRow, error) {
	rows, err := q.db.QueryContext(ctx, getServicesByCustomer, arg.Customer, arg.Page, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetServicesByCustomerRow{}
	for rows.Next() {
		var i GetServicesByCustomerRow
		if err := rows.Scan(
			&i.ID,
			&i.Image,
			&i.Code,
			&i.Title,
			&i.Entity,
			&i.Staff,
			&i.Frequency,
			&i.ReminderTime,
			&i.Unit,
			&i.Price,
			&i.Description,
			&i.Company,
			&i.UserCreated,
			&i.UserUpdated,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Brand,
			&i.ActionTime,
			&i.ChiDinh,
			&i.ChongChiDinh,
			&i.CongDung,
			&i.Caution,
			&i.HinhThuc,
			&i.TacDungPhu,
			&i.NumberRegister,
			&i.NumberDecision,
			&i.CongTyDk,
			&i.Message,
			&i.QuantityUse,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listServiceVariant = `-- name: ListServiceVariant :many
SELECT sv.id, service, variant, v.id, name, code, barcode, decision_number, register_number, longevity, vat, product, user_created, user_updated, updated_at, created_at, initial_inventory, real_inventory FROM service_variant sv
LEFT JOIN variants v ON v.id = sv.variant
WHERE sv.service = $1::int
`

type ListServiceVariantRow struct {
	ID               int32           `json:"id"`
	Service          sql.NullInt32   `json:"service"`
	Variant          sql.NullInt32   `json:"variant"`
	ID_2             sql.NullInt32   `json:"id_2"`
	Name             sql.NullString  `json:"name"`
	Code             sql.NullString  `json:"code"`
	Barcode          sql.NullString  `json:"barcode"`
	DecisionNumber   sql.NullString  `json:"decision_number"`
	RegisterNumber   sql.NullString  `json:"register_number"`
	Longevity        sql.NullString  `json:"longevity"`
	Vat              sql.NullFloat64 `json:"vat"`
	Product          sql.NullInt32   `json:"product"`
	UserCreated      sql.NullInt32   `json:"user_created"`
	UserUpdated      sql.NullInt32   `json:"user_updated"`
	UpdatedAt        sql.NullTime    `json:"updated_at"`
	CreatedAt        sql.NullTime    `json:"created_at"`
	InitialInventory sql.NullInt32   `json:"initial_inventory"`
	RealInventory    sql.NullInt32   `json:"real_inventory"`
}

func (q *Queries) ListServiceVariant(ctx context.Context, id int32) ([]ListServiceVariantRow, error) {
	rows, err := q.db.QueryContext(ctx, listServiceVariant, id)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ListServiceVariantRow{}
	for rows.Next() {
		var i ListServiceVariantRow
		if err := rows.Scan(
			&i.ID,
			&i.Service,
			&i.Variant,
			&i.ID_2,
			&i.Name,
			&i.Code,
			&i.Barcode,
			&i.DecisionNumber,
			&i.RegisterNumber,
			&i.Longevity,
			&i.Vat,
			&i.Product,
			&i.UserCreated,
			&i.UserUpdated,
			&i.UpdatedAt,
			&i.CreatedAt,
			&i.InitialInventory,
			&i.RealInventory,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const servicesUsedByCustomer = `-- name: ServicesUsedByCustomer :many
SELECT s.id, s.image, s.code, s.title, s.entity, s.staff, s.frequency, s.reminder_time, s.unit, s.price, s.description, s.company, s.user_created, s.user_updated, s.created_at, s.updated_at, s.brand, s.action_time, s.chi_dinh, s.chong_chi_dinh, s.cong_dung, s.caution, s.hinh_thuc, s.tac_dung_phu, s.number_register, s.number_decision, s.cong_ty_dk, s.message, COUNT(s.id) AS number_of_uses FROM service_order_item soi
JOIN orders o ON o.id = soi.order
JOIN services s ON s.id = soi.service
WHERE o.customer = $1::int
GROUP BY s.id
LIMIT COALESCE($3::int, 10)
OFFSET (COALESCE($2::int, 1) - 1) * COALESCE($3::int, 10)
`

type ServicesUsedByCustomerParams struct {
	Customer int32         `json:"customer"`
	Page     sql.NullInt32 `json:"page"`
	Limit    sql.NullInt32 `json:"limit"`
}

type ServicesUsedByCustomerRow struct {
	ID             int32          `json:"id"`
	Image          sql.NullInt32  `json:"image"`
	Code           string         `json:"code"`
	Title          string         `json:"title"`
	Entity         sql.NullString `json:"entity"`
	Staff          sql.NullInt32  `json:"staff"`
	Frequency      sql.NullString `json:"frequency"`
	ReminderTime   sql.NullInt32  `json:"reminder_time"`
	Unit           string         `json:"unit"`
	Price          float64        `json:"price"`
	Description    sql.NullString `json:"description"`
	Company        int32          `json:"company"`
	UserCreated    int32          `json:"user_created"`
	UserUpdated    sql.NullInt32  `json:"user_updated"`
	CreatedAt      time.Time      `json:"created_at"`
	UpdatedAt      sql.NullTime   `json:"updated_at"`
	Brand          sql.NullInt32  `json:"brand"`
	ActionTime     sql.NullString `json:"action_time"`
	ChiDinh        sql.NullString `json:"chi_dinh"`
	ChongChiDinh   sql.NullString `json:"chong_chi_dinh"`
	CongDung       sql.NullString `json:"cong_dung"`
	Caution        sql.NullString `json:"caution"`
	HinhThuc       sql.NullString `json:"hinh_thuc"`
	TacDungPhu     sql.NullString `json:"tac_dung_phu"`
	NumberRegister sql.NullString `json:"number_register"`
	NumberDecision sql.NullString `json:"number_decision"`
	CongTyDk       sql.NullString `json:"cong_ty_dk"`
	Message        sql.NullString `json:"message"`
	NumberOfUses   int64          `json:"number_of_uses"`
}

func (q *Queries) ServicesUsedByCustomer(ctx context.Context, arg ServicesUsedByCustomerParams) ([]ServicesUsedByCustomerRow, error) {
	rows, err := q.db.QueryContext(ctx, servicesUsedByCustomer, arg.Customer, arg.Page, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ServicesUsedByCustomerRow{}
	for rows.Next() {
		var i ServicesUsedByCustomerRow
		if err := rows.Scan(
			&i.ID,
			&i.Image,
			&i.Code,
			&i.Title,
			&i.Entity,
			&i.Staff,
			&i.Frequency,
			&i.ReminderTime,
			&i.Unit,
			&i.Price,
			&i.Description,
			&i.Company,
			&i.UserCreated,
			&i.UserUpdated,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Brand,
			&i.ActionTime,
			&i.ChiDinh,
			&i.ChongChiDinh,
			&i.CongDung,
			&i.Caution,
			&i.HinhThuc,
			&i.TacDungPhu,
			&i.NumberRegister,
			&i.NumberDecision,
			&i.CongTyDk,
			&i.Message,
			&i.NumberOfUses,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateService = `-- name: UpdateService :one
UPDATE services
SET
    image = COALESCE($1::int, image),
    title = COALESCE($2::varchar, title),
    entity = COALESCE($3::varchar, entity),
    staff = COALESCE($4::int, staff),
    frequency = COALESCE($5::varchar, frequency),
    unit = COALESCE($6::varchar, unit),
    price = COALESCE($7::float, price),
    description = COALESCE($8::varchar, description),
    brand = COALESCE($9::varchar, brand),
    action_time = COALESCE($10::varchar, action_time),
    chi_dinh = COALESCE($11::varchar, chi_dinh),
    chong_chi_dinh = COALESCE($12::varchar, chong_chi_dinh),
    cong_dung = COALESCE($13::varchar, cong_dung),
    caution = COALESCE($14::varchar, caution),
    hinh_thuc = COALESCE($15::varchar, hinh_thuc),
    tac_dung_phu = COALESCE($16::varchar, tac_dung_phu),
    number_register = COALESCE($17::varchar, number_register),
    number_decision = COALESCE($18::varchar, number_decision),
    cong_ty_dk = COALESCE($19::varchar, cong_ty_dk),
    message = COALESCE($20::varchar, message),
    user_updated = $21::int,
    updated_at = now()
WHERE id = $22
RETURNING id, image, code, title, entity, staff, frequency, reminder_time, unit, price, description, company, user_created, user_updated, created_at, updated_at, brand, action_time, chi_dinh, chong_chi_dinh, cong_dung, caution, hinh_thuc, tac_dung_phu, number_register, number_decision, cong_ty_dk, message
`

type UpdateServiceParams struct {
	Image          sql.NullInt32   `json:"image"`
	Title          sql.NullString  `json:"title"`
	Entity         sql.NullString  `json:"entity"`
	Staff          sql.NullInt32   `json:"staff"`
	Frequency      sql.NullString  `json:"frequency"`
	Unit           sql.NullString  `json:"unit"`
	Price          sql.NullFloat64 `json:"price"`
	Description    sql.NullString  `json:"description"`
	Brand          sql.NullString  `json:"brand"`
	ActionTime     sql.NullString  `json:"action_time"`
	ChiDinh        sql.NullString  `json:"chi_dinh"`
	ChongChiDinh   sql.NullString  `json:"chong_chi_dinh"`
	CongDung       sql.NullString  `json:"cong_dung"`
	Caution        sql.NullString  `json:"caution"`
	HinhThuc       sql.NullString  `json:"hinh_thuc"`
	TacDungPhu     sql.NullString  `json:"tac_dung_phu"`
	NumberRegister sql.NullString  `json:"number_register"`
	NumberDecision sql.NullString  `json:"number_decision"`
	CongTyDk       sql.NullString  `json:"cong_ty_dk"`
	Message        sql.NullString  `json:"message"`
	UserUpdated    sql.NullInt32   `json:"user_updated"`
	ID             int32           `json:"id"`
}

func (q *Queries) UpdateService(ctx context.Context, arg UpdateServiceParams) (Service, error) {
	row := q.db.QueryRowContext(ctx, updateService,
		arg.Image,
		arg.Title,
		arg.Entity,
		arg.Staff,
		arg.Frequency,
		arg.Unit,
		arg.Price,
		arg.Description,
		arg.Brand,
		arg.ActionTime,
		arg.ChiDinh,
		arg.ChongChiDinh,
		arg.CongDung,
		arg.Caution,
		arg.HinhThuc,
		arg.TacDungPhu,
		arg.NumberRegister,
		arg.NumberDecision,
		arg.CongTyDk,
		arg.Message,
		arg.UserUpdated,
		arg.ID,
	)
	var i Service
	err := row.Scan(
		&i.ID,
		&i.Image,
		&i.Code,
		&i.Title,
		&i.Entity,
		&i.Staff,
		&i.Frequency,
		&i.ReminderTime,
		&i.Unit,
		&i.Price,
		&i.Description,
		&i.Company,
		&i.UserCreated,
		&i.UserUpdated,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Brand,
		&i.ActionTime,
		&i.ChiDinh,
		&i.ChongChiDinh,
		&i.CongDung,
		&i.Caution,
		&i.HinhThuc,
		&i.TacDungPhu,
		&i.NumberRegister,
		&i.NumberDecision,
		&i.CongTyDk,
		&i.Message,
	)
	return i, err
}
